var R=({Type:o}={Type:"HTML"})=>{const[n,{Form:d,Field:b}]=z(),a=crypto.randomUUID();g(h(r.Editors[0],t=>{K(n,"Content",t.get(a)?.Content??"",{shouldFocus:!1,shouldTouched:!1}),v(n)},{defer:!1}));const i=N(S(o));g(h(p.Messages[0],t=>t?.get("Type")&&i[1](t?.get("Type")),{defer:!1}));let l,e;return r.Editors[0]().set(a,{Type:o,Hidden:r.Editors[0]().size>0,Content:i[0]()}),P(()=>{l instanceof HTMLElement&&(e=k.create(l,{value:i[0](),language:o.toLowerCase(),automaticLayout:!0,lineNumbers:"off","semanticHighlighting.enabled":"configuredByTheme",autoClosingBrackets:"always",autoIndent:"full",tabSize:4,detectIndentation:!1,useTabStops:!0,minimap:{enabled:!1},scrollbar:{useShadows:!0,horizontal:"hidden",verticalScrollbarSize:10,verticalSliderSize:4,alwaysConsumeMouseWheel:!1},folding:!1,theme:window.matchMedia("(prefers-color-scheme: dark)").matches?"Dark":"Light",wrappingStrategy:"advanced",wordWrap:"on",bracketPairColorization:{enabled:!0,independentColorPoolPerBracketType:!0},padding:{top:12,bottom:12},fixedOverflowWidgets:!0,tabCompletion:"on",acceptSuggestionOnEnter:"on",cursorWidth:5,roundedSelection:!0,matchBrackets:"always",autoSurround:"languageDefined",screenReaderAnnounceInlineSuggestion:!1,renderFinalNewline:"on",selectOnLineNumbers:!1,formatOnType:!0,formatOnPaste:!0,fontFamily:"'Source Code Pro'",fontWeight:"400",fontLigatures:!0,links:!1,fontSize:16}),e.getModel()?.setEOL(k.EndOfLineSequence.LF),e.onKeyDown(t=>{t.ctrlKey&&t.code==="KeyS"&&(t.preventDefault(),v(n),n.element?.submit())}),e.getModel()?.onDidChangeContent(()=>{r.Editors[1](T(r.Editors[0](),new Map([[a,{Content:e.getModel()?.getValue()??"",Hidden:r.Editors[0]()?.get(a)?.Hidden??!0,Type:o}]])))}),e.onDidChangeModelLanguageConfiguration(()=>e.getAction("editor.action.formatDocument")?.run()),e.onDidLayoutChange(()=>e.getAction("editor.action.formatDocument")?.run()),window.addEventListener("load",()=>e.getAction("editor.action.formatDocument")?.run()),setTimeout(()=>e.getAction("editor.action.formatDocument")?.run(),1e3),g(h(i[0],t=>e.getModel()?.setValue(t),{defer:!1})),p.Socket[0]()?.send(JSON.stringify({Key:c.Items[0]()?.get("Key")?.[0](),Identifier:c.Items[0]()?.get("Identifier")?.[0](),From:"Content",View:o})))}),React.createElement("div",{class:!r.Editors[0]()?.get(a)?.Hidden&&L.Data[0]()?.get("Name")?"":"hidden"},React.createElement("p",null,"Edit your"," ",React.createElement(U,{each:Array.from(r.Editors[0]().entries())},(t,s)=>React.createElement(React.Fragment,null,React.createElement(A,{Action:()=>{r.Editors[0]().forEach((w,y)=>{w.Hidden=t[0]!==y,r.Editors[1](T(r.Editors[0](),new Map([[y,w]])))}),setTimeout(()=>{e.setScrollPosition({scrollTop:-50})},1e3)}},t[1].Type),s()===r.Editors[0]().size-1?"":" / "))," ","here:"),React.createElement("br",null),React.createElement(d,{method:"post",onSubmit:x},React.createElement(b,{name:"Content",validate:[B(`Please enter some ${o}.`)]},(t,s)=>React.createElement("div",{class:"w-full"},React.createElement("div",{class:"Editor"},o==="HTML"?React.createElement("p",{class:"Help"},"Available variables are:\xA0\xA0",React.createElement(m,null,React.createElement("kbd",{onClick:f},React.createElement("span",null,"{"),"Cover",React.createElement("span",null,"}"))),",\xA0",React.createElement(m,null,React.createElement("kbd",{onClick:f},React.createElement("span",null,"{"),"Artist",React.createElement("span",null,"}"))),"\xA0and\xA0",React.createElement(m,null,React.createElement("kbd",{onClick:f},React.createElement("span",null,"{"),"Song",React.createElement("span",null,"}"))),"."):"",React.createElement("code",{ref:l,class:"Monaco"}),t.error&&React.createElement(React.Fragment,null,React.createElement("div",{class:"Error",onClick:()=>{O(n,"Content"),e.focus()}},React.createElement("span",null,"\xA0\xA0\xA0",t.error))),React.createElement("input",{...s,value:r.Editors[0]()?.get(a)?.Content??"",type:"hidden",required:!0})))),React.createElement(b,{name:"Field"},(t,s)=>React.createElement("input",{type:"hidden",...s,value:o})),React.createElement("div",{class:"Action grid grid-flow-col items-center justify-items-center gap-x-2"},React.createElement("div",{class:"grid grid-flow-col items-center justify-items-center"},React.createElement(u,{Type:"submit"},React.createElement("picture",null,React.createElement("source",{media:"(prefers-color-scheme: light)",srcset:`${E.src}`}),React.createElement("source",{media:"(prefers-color-scheme: dark)",srcset:`${D.src}`}),React.createElement("img",{alt:"Update",src:E.src,class:"Icon pr-3"})),React.createElement("span",null,"Update")),React.createElement(u,{Type:"reset",Action:()=>{e.getModel()?.setValue(i[0]()),e.getAction("editor.action.formatDocument")?.run()}},React.createElement("picture",null,React.createElement("source",{srcset:`${C.src}`,media:"(prefers-color-scheme: light)"}),React.createElement("source",{media:"(prefers-color-scheme: dark)",srcset:`${M.src}`}),React.createElement("img",{alt:"Reset",src:C.src,class:"Icon"})),"\xA0\xA0\xA0",React.createElement("span",null,"Reset")),React.createElement(u,{Action:()=>{e.getModel()?.setValue(S(o)),e.getAction("editor.action.formatDocument")?.run()}},React.createElement("span",null,"Default"))))))};const S=o=>{switch(o){case"CSS":return I;case"HTML":return F;case"TypeScript":return H;default:return""}},x=({Content:o,Field:n},d)=>{d&&(d.preventDefault(),p.Socket[0]()?.send(JSON.stringify({Key:c.Items[0]()?.get("Key")?.[0](),Identifier:c.Items[0]()?.get("Identifier")?.[0](),To:n,Input:o})))},{default:M}=await import("@Asset/Image/DarkReset.svg"),{default:D}=await import("@Asset/Image/DarkUpdate.svg"),{default:C}=await import("@Asset/Image/LightReset.svg"),{default:E}=await import("@Asset/Image/LightUpdate.svg"),{default:r}=await import("../Context/Action/Context.js"),{default:p}=await import("../Context/Connection/Context.js"),{default:L}=await import("../Context/Session/Context.js"),{default:c}=await import("../Context/Store/Context.js"),{default:A}=await import("./Anchor.js"),{default:u}=await import("./Button.js"),{default:m,Fn:f}=await import("./Tip/Copy.js"),{default:T}=await import("@Library/Merge"),{default:V}=await import("@Library/Wrap"),{default:I}=await import("@Option/Edit/Theme/Default/CSS"),{default:F}=await import("@Option/Edit/Theme/Default/HTML"),{default:H}=await import("@Option/Edit/Theme/Default/TypeScript");import{clearError as O,createForm as z,required as B,setValue as K,validate as v}from"@modular-forms/solid";import{editor as k}from"monaco-editor";import{onMount as P}from"solid-js";import{For as U,createEffect as g,createSignal as N,on as h}from"solid-js";import"@Stylesheet/Element/Action.scss";import"@Stylesheet/Element/Editor.scss";export{r as Action,A as Anchor,u as Button,I as CSS,p as Connection,f as Copy,M as DarkReset,D as DarkUpdate,F as HTML,C as LightReset,E as LightUpdate,T as Merge,S as Return,L as Session,c as Store,m as Tip,H as TypeScript,x as Update,V as Wrap,R as default};
